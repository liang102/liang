<!doctype html><html lang=zh-cn dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Nginx Instruct &#183; 小橘子Single</title><meta name=title content="Nginx Instruct &#183; 小橘子Single"><meta name=description content="Nginx 基础指令介绍"><meta name=keywords content="Nginx,"><link rel=canonical href=https://ergua.site/docs/nginx/instruct/><link type=text/css rel=stylesheet href=/css/main.bundle.min.6833995e44970292e0f9ca092335559062eb28130377f96a964a3f8d43210491b742d6cfd9d9c1b98dc3f019e22e3c6029192fa0f6950aa4ca9cbf4820ec956b.css integrity="sha512-aDOZXkSXApLg+coJIzVVkGLrKBMDd/lqlko/jUMhBJG3QtbP2dnBuY3D8BniLjxgKRkvoPaVCqTKnL9IIOyVaw=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.98781e4deb4de66c4eadf8a8179fe645558f01924d401f8fc3a4478c01626fe5a2c906ea8dc1b321a24e027a4fe8a4e634f5641d74bca535bca4e7af32eae0e2.js integrity="sha512-mHgeTetN5mxOrfioF5/mRVWPAZJNQB+Pw6RHjAFib+WiyQbqjcGzIaJOAnpP6KTmNPVkHXS8pTW8pOevMurg4g==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Nginx Instruct"><meta property="og:description" content="Nginx 基础指令介绍"><meta property="og:type" content="article"><meta property="og:url" content="https://ergua.site/docs/nginx/instruct/"><meta property="og:image" content="https://ergua.site/docs/nginx/instruct/featured.png"><meta property="article:section" content="docs"><meta property="og:site_name" content="小橘子Single"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ergua.site/docs/nginx/instruct/featured.png"><meta name=twitter:title content="Nginx Instruct"><meta name=twitter:description content="Nginx 基础指令介绍"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"知识存档","name":"Nginx Instruct","headline":"Nginx Instruct","abstract":"Nginx 基础指令介绍","inLanguage":"zh-cn","url":"https:\/\/ergua.site\/docs\/nginx\/instruct\/","author":{"@type":"Person","name":"小橘子Single"},"keywords":["Nginx"],"mainEntityOfPage":"true","wordCount":"609"}]</script><meta name=author content="小橘子Single"><link href=https://github.com/liang102/liang102.github.io.git rel=me><link href=https://blog.csdn.net/weixin_45971087 rel=me><link href=mailto:1509593534@qq.com rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><meta name=theme-color><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js></script>
<script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js></script>
<script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js></script>
<script>const firebaseConfig={apiKey:"AIzaSyA4kWh6qFDc6jJ0kF5a2W2Nc-IyUq_92NY",authDomain:"AIzaSyA4kWh6qFDc6jJ0kF5a2W2Nc-IyUq_92NY",projectId:"my-blowfish-blog",storageBucket:"my-blowfish-blog.appspot.com",messagingSenderId:"97590131429",appId:"1:97590131429:web:c3b16b6a0812ca6021f20c",measurementId:"G-ZN07XFW3D8"};var app=firebase.initializeApp(firebaseConfig),db=firebase.firestore(),auth=firebase.auth()</script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>小橘子Single</span>
<img src=/img/sedlogo.png width=256 height=256 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt=小橘子Single></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">小橘子Single</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M421.7 220.3 188.5 453.4l-33.9-33.9 3.5-3.5H112C103.2 416 96 408.8 96 4e2V353.9l-3.49 3.5C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6l78.16-23C143.1 427.7 149.8 424.2 154.6 419.5l33.9 33.9c-10.4 10.4-23.3 18.1-37.4 22.2L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1.8198 498.8-1.502 489.7.976 481.2L36.37 360.9c4.16-14.1 11.79-27 22.2-37.4L291.7 90.34l130 129.96zm71-161.55C517.7 83.74 517.7 124.3 492.7 149.3l-48.4 48.4-130-129.98 48.4-48.4c25-24.998 65.6-24.998 90.6.0l39.4 39.43z"/></svg></span></span><p class="text-base font-medium" title=笔记>笔记</p></a><div><div class="cursor-pointer flex items-center nested-menu"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32 93.5 32 46.3 45.3 18.1 56.1 6.8 60.5.0 71.7.0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9.0 79 14 105.6 23.5zm76.8.0C353 462 398.1 448 432 448c38.5.0 88.4 12.1 119.9 22.6 11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4.0-103.4 20-123 35.6-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"/></svg></span></span><a class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>知识库</a>
<span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/docs/theme/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M275.2 38.4c-10.6-8-25-8.5-36.3-1.5S222 57.3 224.6 70.3l9.7 48.6c-19.4 9-36.9 19.9-52.4 31.5-15.3 11.5-29 23.9-40.7 36.3L48.1 132.4c-12.5-7.3-28.4-5.3-38.6 4.9s-12.5 26-5.3 38.6L50 256 4.2 336.1c-7.2 12.6-5 28.4 5.3 38.6s26.1 12.2 38.6 4.9l93.1-54.3c11.8 12.3 25.4 24.8 40.7 36.3 15.5 11.6 33 22.5 52.4 31.5l-9.7 48.6c-2.6 13 3.1 26.3 14.3 33.3s25.6 6.5 36.3-1.5l77.6-58.2c54.9-4 101.5-27 137.2-53.8 39.2-29.4 67.2-64.7 81.6-89.5 5.8-9.9 5.8-22.2.0-32.1-14.4-24.8-42.5-60.1-81.6-89.5-35.8-26.8-82.3-49.8-137.2-53.8L275.2 38.4zM384 256a32 32 0 1164 0 32 32 0 11-64 0z"/></svg></span></span><p class="text-sm font-sm" title=blowfish主题>主题快速上手</p></a><a href=/docs/linux/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1.0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2.0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8.0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4.0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1.0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1.0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9.0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1.0 14.2-2.2 16.7-8.9 2.3-6.2.0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2.0-4.2.0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6.0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg></span></span><p class="text-sm font-sm" title=Linux>云计算</p></a><a href=/docs/css/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg></span></span><p class="text-sm font-sm" title=CSS>CSS</p></a><a href=/docs/nginx/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M256 64H384v64H256V64zM240 0c-26.5.0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h48v32H32c-17.7.0-32 14.3-32 32s14.3 32 32 32h96v32H80c-26.5.0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H240c26.5.0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H192V288H448v32H4e2c-26.5.0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H560c26.5.0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H512V288h96c17.7.0 32-14.3 32-32s-14.3-32-32-32H352V192h48c26.5.0 48-21.5 48-48V48c0-26.5-21.5-48-48-48H240zM96 448V384H224v64H96zm320-64H544v64H416V384z"/></svg></span></span><p class="text-sm font-sm" title=Nginx>Nginx</p></a></div></div></div></div><div><div class="cursor-pointer flex items-center nested-menu"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><a class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>关于</a>
<span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/about/me/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 256A128 128 0 10224 0a128 128 0 100 256zm-45.7 48C79.8 304 0 383.8.0 482.3.0 498.7 13.3 512 29.7 512H418.3c16.4.0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg></span></span><p class="text-sm font-sm" title=关于我>关于我</p></a><a href=/about/shuoshuo/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 32C114.6 32 .0272 125.1.0272 240c0 49.63 21.35 94.98 56.97 130.7-12.5 50.37-54.27 95.27-54.77 95.77-2.25 2.25-2.875 5.734-1.5 8.734C1.979 478.2 4.75 480 8 480c66.25.0 115.1-31.76 140.6-51.39C181.2 440.9 217.6 448 256 448c141.4.0 255.1-93.13 255.1-208S397.4 32 256 32z"/></svg></span></span><p class="text-sm font-sm" title=说说>说说</p></a><a href=/about/friends/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg></span></span><p class="text-sm font-sm" title=友链>友情链接</p></a></div></div></div></div><a href=/tools/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M352 320c88.4.0 160-71.6 160-160 0-15.3-2.2-30.1-6.2-44.2-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8.0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3.0 352 0 263.6.0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8.0 426.1.0 444.1.0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 110 48 24 24 0 110-48z"/></svg></span></span><p class="text-base font-medium" title=实用工具>实用工具</p></a><a href=https://ergua.site/index.xml target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM128 416c0 35.3-28.7 64-64 64S0 451.3.0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg></span></span><p class="text-base font-medium" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400" style=margin-right:5px><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L237.3 256 342.6 150.6z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M421.7 220.3 188.5 453.4l-33.9-33.9 3.5-3.5H112C103.2 416 96 408.8 96 4e2V353.9l-3.49 3.5C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6l78.16-23C143.1 427.7 149.8 424.2 154.6 419.5l33.9 33.9c-10.4 10.4-23.3 18.1-37.4 22.2L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1.8198 498.8-1.502 489.7.976 481.2L36.37 360.9c4.16-14.1 11.79-27 22.2-37.4L291.7 90.34l130 129.96zm71-161.55C517.7 83.74 517.7 124.3 492.7 149.3l-48.4 48.4-130-129.98 48.4-48.4c25-24.998 65.6-24.998 90.6.0l39.4 39.43z"/></svg></span></div><p class="text-bg font-bg" title=笔记>笔记</p></a></li><li class=mt-1><a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32 93.5 32 46.3 45.3 18.1 56.1 6.8 60.5.0 71.7.0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9.0 79 14 105.6 23.5zm76.8.0C353 462 398.1 448 432 448c38.5.0 88.4 12.1 119.9 22.6 11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4.0-103.4 20-123 35.6-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"/></svg></span></span><p class="text-bg font-bg" title>知识库</p><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/docs/theme/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M275.2 38.4c-10.6-8-25-8.5-36.3-1.5S222 57.3 224.6 70.3l9.7 48.6c-19.4 9-36.9 19.9-52.4 31.5-15.3 11.5-29 23.9-40.7 36.3L48.1 132.4c-12.5-7.3-28.4-5.3-38.6 4.9s-12.5 26-5.3 38.6L50 256 4.2 336.1c-7.2 12.6-5 28.4 5.3 38.6s26.1 12.2 38.6 4.9l93.1-54.3c11.8 12.3 25.4 24.8 40.7 36.3 15.5 11.6 33 22.5 52.4 31.5l-9.7 48.6c-2.6 13 3.1 26.3 14.3 33.3s25.6 6.5 36.3-1.5l77.6-58.2c54.9-4 101.5-27 137.2-53.8 39.2-29.4 67.2-64.7 81.6-89.5 5.8-9.9 5.8-22.2.0-32.1-14.4-24.8-42.5-60.1-81.6-89.5-35.8-26.8-82.3-49.8-137.2-53.8L275.2 38.4zM384 256a32 32 0 1164 0 32 32 0 11-64 0z"/></svg></span></span><p class="text-sm font-small" title=blowfish主题>主题快速上手</p></a></li><li class=mt-1><a href=/docs/linux/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1.0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2.0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8.0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4.0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1.0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1.0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9.0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1.0 14.2-2.2 16.7-8.9 2.3-6.2.0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2.0-4.2.0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6.0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg></span></span><p class="text-sm font-small" title=Linux>云计算</p></a></li><li class=mt-1><a href=/docs/css/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M0 32l34.9 395.8L192 480l157.1-52.2L384 32H0zm313.1 80-4.8 47.3L193 208.6l-.3.1h111.5l-12.8 146.6-98.2 28.7-98.8-29.2-6.4-73.9h48.9l3.2 38.3 52.6 13.3 54.7-15.4 3.7-61.6-166.3-.5v-.1l-.2.1-3.6-46.3L193.1 162l6.5-2.7H76.7L70.9 112h242.2z"/></svg></span></span><p class="text-sm font-small" title=CSS>CSS</p></a></li><li class=mt-1><a href=/docs/nginx/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M256 64H384v64H256V64zM240 0c-26.5.0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h48v32H32c-17.7.0-32 14.3-32 32s14.3 32 32 32h96v32H80c-26.5.0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H240c26.5.0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H192V288H448v32H4e2c-26.5.0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H560c26.5.0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H512V288h96c17.7.0 32-14.3 32-32s-14.3-32-32-32H352V192h48c26.5.0 48-21.5 48-48V48c0-26.5-21.5-48-48-48H240zM96 448V384H224v64H96zm320-64H544v64H416V384z"/></svg></span></span><p class="text-sm font-small" title=Nginx>Nginx</p></a></li><li class=mb-2></li><li class=mt-1><a class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><p class="text-bg font-bg" title>关于</p><span><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/about/me/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 256A128 128 0 10224 0a128 128 0 100 256zm-45.7 48C79.8 304 0 383.8.0 482.3.0 498.7 13.3 512 29.7 512H418.3c16.4.0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg></span></span><p class="text-sm font-small" title=关于我>关于我</p></a></li><li class=mt-1><a href=/about/shuoshuo/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 32C114.6 32 .0272 125.1.0272 240c0 49.63 21.35 94.98 56.97 130.7-12.5 50.37-54.27 95.27-54.77 95.77-2.25 2.25-2.875 5.734-1.5 8.734C1.979 478.2 4.75 480 8 480c66.25.0 115.1-31.76 140.6-51.39C181.2 440.9 217.6 448 256 448c141.4.0 255.1-93.13 255.1-208S397.4 32 256 32z"/></svg></span></span><p class="text-sm font-small" title=说说>说说</p></a></li><li class=mt-1><a href=/about/friends/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentcolor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg></span></span><p class="text-sm font-small" title=友链>友情链接</p></a></li><li class=mb-2></li><li class=mt-1><a href=/tools/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M352 320c88.4.0 160-71.6 160-160 0-15.3-2.2-30.1-6.2-44.2-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8.0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3.0 352 0 263.6.0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8.0 426.1.0 444.1.0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 110 48 24 24 0 110-48z"/></svg></span></div><p class="text-bg font-bg" title=实用工具>实用工具</p></a></li><li class=mt-1><a href=https://ergua.site/index.xml target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM128 416c0 35.3-28.7 64-64 64S0 451.3.0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg></span></div><p class="text-bg font-bg" title></p></a></li></ul><hr><ul class="flex mt-4 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li class=mb-1><a href=/tags/ class="flex items-center"><span class=mr-3><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M48 32H197.5c17 0 33.2 6.74 45.2 18.75l176 175.95c25 25 25 65.6.0 90.6L285.3 450.7c-25 25-65.6 25-90.6.0L18.75 274.7C6.743 262.7.0 246.5.0 229.5V80C0 53.49 21.49 32 48 32zm64 144c17.7.0 32-14.3 32-32 0-17.7-14.3-32-32-32-17.67.0-32 14.3-32 32s14.33 32 32 32z"/></svg></span></span><p class="text-sm font-sm text-gray-500 hover:text-gray-900" title=Tags>标签</p></a></li></ul></div></label></div></div><div class="main-menu flex pb-3 flex-col items-end justify-between md:justify-start space-x-3" style=margin-top:-15px><div class="hidden md:flex items-center space-x-5"><a href=/tags/ class="flex items-center"><span class=mr-1><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M48 32H197.5c17 0 33.2 6.74 45.2 18.75l176 175.95c25 25 25 65.6.0 90.6L285.3 450.7c-25 25-65.6 25-90.6.0L18.75 274.7C6.743 262.7.0 246.5.0 229.5V80C0 53.49 21.49 32 48 32zm64 144c17.7.0 32-14.3 32-32 0-17.7-14.3-32-32-32-17.67.0-32 14.3-32 32s14.33 32 32 32z"/></svg></span></span><p class="text-xs font-light text-gray-500 hover:text-gray-900" title=Tags>标签</p></a></div></div></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/docs/nginx/instruct/featured_hu82fe8e0bc935f627e6844c5b8a45aa9c_12498_1200x0_resize_box_3.png)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Nginx Instruct</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><span>609 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>3 分钟</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=views_docs/nginx/instruct/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=views>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span></span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=likes_docs/nginx/instruct/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=likes>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span></span><span class="px-2 text-primary-500">&#183;</span><span>
<button id=button_likes class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400" onclick=process_article()>
<span id=button_likes_heart style=display:none class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span><span id=button_likes_emtpty_heart class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M244 84l11.1 12 12-11.98C300.6 51.37 347 36.51 392.6 44.1 461.5 55.58 512 115.2 512 185.1V190.9c0 41.5-17.2 81.2-47.6 109.5L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9S235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1.0 232.4.0 190.9V185.1c0-69.9 50.52-129.52 119.4-141 44.7-7.59 92 7.27 124.6 39.9C243.1 84 244 84.01 244 84zm11.1 79.9-45-46.8c-21.7-20.82-52.5-30.7-82.8-25.66C81.55 99.07 48 138.7 48 185.1V190.9c0 28.2 11.71 55.2 32.34 74.4L256 429.3l175.7-164c20.6-19.2 32.3-46.2 32.3-74.4V185.1c0-46.4-33.6-86.03-79.3-93.66C354.4 86.4 323.6 96.28 301.9 117.1l-46.8 46.8z"/></svg></span></span><span id=button_likes_text>&nbsp;Like</span></button></span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/nginx/","_self")'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">nginx</span></span></span></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt=小橘子Single src=/img/avatar_hu4d189f248c6d1afa1e601a913977d86c_199050_192x192_fill_box_center_3.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">作者</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">小橘子Single</div><div class="text-sm text-neutral-700 dark:text-neutral-400">人生如戏，全靠演技</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/liang102/liang102.github.io.git target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://blog.csdn.net/weixin_45971087 target=_blank aria-label=Csdn rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 0c282.784.0 512 229.216 512 512s-229.216 512-512 512S0 794.784.0 512 229.216.0 512 0zm189.952 752 11.2-108.224c-31.904 9.536-100.928 16.128-147.712 16.128-134.464.0-205.728-47.296-195.328-146.304 11.584-110.688 113.152-145.696 232.64-145.696 54.784.0 122.432 8.8 151.296 18.336L768 272.704C724.544 262.24 678.272 256 599.584 256c-203.2.0-388.704 94.88-406.4 263.488C178.336 660.96 303.584 768 535.616 768c80.672.0 138.464-6.432 166.336-16z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:1509593534@qq.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M48 64C21.5 64 0 85.5.0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4.0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4.0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3.0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8.0L0 176z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目录</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#nginx配置基础指令>Nginx配置基础指令</a><ul><li><a href=#user>user</a></li><li><a href=#worker_processes>worker_processes</a></li><li><a href=#pid>pid</a></li><li><a href=#error_log>error_log</a></li><li><a href=#include>include</a></li><li><a href=#accept_mutex>accept_mutex</a></li><li><a href=#multi_accept>multi_accept</a></li><li><a href=#use>use</a></li><li><a href=#worker_connections>worker_connections</a></li><li><a href=#default_type>default_type</a></li><li><a href=#access_log>access_log</a></li><li><a href=#log_format>log_format</a></li><li><a href=#sendfile>sendfile</a></li><li><a href=#sendfile_max_chunk>sendfile_max_chunk</a></li><li><a href=#keepalive_timeout>keepalive_timeout</a></li><li><a href=#keepalive_requests>keepalive_requests</a></li><li><a href=#listen>listen</a></li><li><a href=#server_name>server_name</a></li></ul></li><li><a href=#配置location块>配置location块</a><ul><li><a href=#root>root</a></li><li><a href=#alias>alias</a></li><li><a href=#index>index</a></li><li><a href=#error_pgae>error_pgae</a></li><li><a href=#allow>allow</a></li><li><a href=#deny>deny</a></li><li><a href=#auth_basic>auth_basic</a></li><li><a href=#auth_basic_user_file>auth_basic_user_file</a></li></ul></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目录</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#nginx配置基础指令>Nginx配置基础指令</a><ul><li><a href=#user>user</a></li><li><a href=#worker_processes>worker_processes</a></li><li><a href=#pid>pid</a></li><li><a href=#error_log>error_log</a></li><li><a href=#include>include</a></li><li><a href=#accept_mutex>accept_mutex</a></li><li><a href=#multi_accept>multi_accept</a></li><li><a href=#use>use</a></li><li><a href=#worker_connections>worker_connections</a></li><li><a href=#default_type>default_type</a></li><li><a href=#access_log>access_log</a></li><li><a href=#log_format>log_format</a></li><li><a href=#sendfile>sendfile</a></li><li><a href=#sendfile_max_chunk>sendfile_max_chunk</a></li><li><a href=#keepalive_timeout>keepalive_timeout</a></li><li><a href=#keepalive_requests>keepalive_requests</a></li><li><a href=#listen>listen</a></li><li><a href=#server_name>server_name</a></li></ul></li><li><a href=#配置location块>配置location块</a><ul><li><a href=#root>root</a></li><li><a href=#alias>alias</a></li><li><a href=#index>index</a></li><li><a href=#error_pgae>error_pgae</a></li><li><a href=#allow>allow</a></li><li><a href=#deny>deny</a></li><li><a href=#auth_basic>auth_basic</a></li><li><a href=#auth_basic_user_file>auth_basic_user_file</a></li></ul></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h3 class="relative group">Nginx配置基础指令<div id=nginx%E9%85%8D%E7%BD%AE%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4 class=anchor></div></h3><h4 class="relative group">user<div id=user class=anchor></div></h4><ul><li>用于配置运行<code>Nginx</code>服务器的用户(组)的指令</li><li>只有被设置的用户或者用户组成员才有权限启动<code>Nginx</code>进程，如果是其他用户(test_user)尝试启用<code>Nginx</code>进程会报错。</li><li>如果希望所有用户都可以启动<code>Nginx</code>进程有两种方法：<ul><li>第一种： 将这个指令注释掉。</li><li>第二种：将用户和用户组设置为默认的用户和用户组(nobody)</li></ul></li><li>语法格式：<ul><li><code>user</code>: 指定运行<code>Nginx</code>服务器的用户。</li><li><code>group</code>: 可选项，指定可以运行nginx服务器的用户组。</li><li>作用域：全局</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2.0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2H272zM192 512c44.2.0 80-35.8 80-80V416H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8.0 16 7.2 16 16s-7.2 16-16 16c-44.2.0-80 35.8-80 80z"/></svg></span></span><span class=dark:text-neutral-300>user [user] [group];</span></div><h4 class="relative group">worker_processes<div id=worker_processes class=anchor></div></h4><ul><li><code>worker_processes</code> 是<code>Nginx</code>服务器实现并发处理服务的关键所在。</li><li>从理论上来说，<code>worker_process</code>的值越大，可以支持的并发处理量也越多，但实际上它还要受到来自软件本身、操作系统本身资源和能力、硬件设备(如CPU和磁盘驱动器)等的制约。</li><li>语法格式：<ul><li><code>number</code>: 指定<code>Nginx</code>进程最多可以产生的<code>worker process</code>数。</li><li><code>auto</code>: 设置该值，<code>Nginx</code>进程将自动检测。</li><li>作用域：全局</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>worker_processes number | auto;</span></div><h4 class="relative group">pid<div id=pid class=anchor></div></h4><ul><li><code>Nginx</code>进程作为系统的守护进程运行，我们需要在某文件中保存当前运行程序的主进程号。</li><li><code>Nginx</code>支持对它的存放路径和名称自定义配置。</li><li>语法格式：<ul><li><code>file</code>：指定<code>Nginx</code>进程PID文件的存放路径和文件名称</li><li>作用域：全局</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>pid file;</span></div><h4 class="relative group">error_log<div id=error_log class=anchor></div></h4><ul><li>配置<code>Nginx</code>错误日志的存放路径和日志级别。</li><li><code>debug</code>日志级别需要在编译时使用(&ndash;with-debug)来开启<code>debug</code>日志。</li><li>设置某一级别后，比这一级别高的日志也会被记录。比如设置warn级别后，级别为warn 以及error、crit、alert和emerg的日志都会被记录下来。</li><li>语法格式：<ul><li><code>file</code>: 指定<code>Nginx</code>错误日志的存放路径和文件名称。指定的文件须对运行<code>Nginx</code>进程的用户具有写权限，否则会报错。</li><li><code>stderr</code>: 指定错误日志级别，[debug | info | notice | warn | error | crit | alert | emerg]</li><li>作用域：全局、<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>error_log file stderr;</span></div><h4 class="relative group">include<div id=include class=anchor></div></h4><ul><li>在一些情况下，我们可能需要将其他的<code>Nginx</code>配置或者第三方模块的配置引用到当前的主配置文件中。</li><li><code>Nginx</code>提供了<code>include</code>指令来完成配置文件的引入。</li><li>引入进来的配置文件要求须对运行<code>Nginx</code>进程的用户具有写权限，并且符合<code>Nginx</code>配置文件规定的相关语法和结构。</li><li>语法格式：<ul><li><code>file</code>：指定要引入的配置文件，支持相对路径。</li><li>作用域: 配置文件的任意地方</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path fill="currentcolor" d="M441 58.9 453.1 71c9.4 9.4 9.4 24.6.0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9.0zM209.8 256.2 344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1L186.9 325l16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25 175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 1e2c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l1e2-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7.0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4.0 152V424c0 48.6 39.4 88 88 88H360c48.6.0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1.0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H2e2c13.3.0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg></span></span><span class=dark:text-neutral-300>include file;</span></div><h4 class="relative group">accept_mutex<div id=accept_mutex class=anchor></div></h4><ul><li>在《UNIX 网络编程》第1卷里提到过一个叫"惊群"的问题(Thundering herd problem)，大致意思是，当某一个时刻只有一个网络连接到来时，多个睡眠进程会被同时叫醒，但只有一个进程可获得连接。如果每次唤醒的进程数目太多，会影响一部分系统性能。在<code>Nginx</code>服务器的多进程下，就有可能出现这样的问题。</li><li>为了解决这样的问题，<code>Nginx</code>配置中包含了这样一条指令<code>accept_mutex</code>，当其设置为开启的时候，将会对多个<code>Nginx</code>进程接收连接进行序列化，防止多个进程对连接的争抢。</li><li>语法结构：<ul><li><code>on</code>: 开启</li><li><code>off</code>: 关闭</li><li>作用域：<code>events</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>accept_mutex on | off;</span></div><h4 class="relative group">multi_accept<div id=multi_accept class=anchor></div></h4><ul><li>每个<code>Nginx</code>服务器的<code>worker process</code>都有能力同时接收多个新到达的网络连接，但是这需要在配置文件中进行配置。</li><li>语法结构：<ul><li><code>on</code>: 开启。高负载建议开启。</li><li><code>off</code>: 关闭。默认off，即每个<code>worker process</code> 一次只能接收一个新到达的网络连接。低负载建议关闭。</li><li>作用域：<code>events</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>multi_accept on | off;</span></div><h4 class="relative group">use<div id=use class=anchor></div></h4><ul><li><code>Nginx</code>服务器提供了多种事件驱动模型来处理网络消息。配置文件中为我们提供了相关指令来强制<code>Nginx</code>服务器选择哪种事件驱动模型进行消息处理。</li><li>在编译的是否可使用<code>--with-select-module</code>是否强制编译<code>select</code>模块到<code>Nginx</code>内核中，或<code>--with-poll_module</code>是否强制将<code>poll</code>模块编译到<code>Nginx</code>内核中。</li><li>语法结构：<ul><li><code>method</code>：事件驱动模型。可选项：[select | poll | kqueue | epoll | rtsig | /dev/poll | eventport]。</li><li>作用域：<code>events</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>use method;</span></div><h4 class="relative group">worker_connections<div id=worker_connections class=anchor></div></h4><ul><li>主要用来设置允许每一个worker process同时开启的最大连接数。</li><li>语法格式：<ul><li><code>number</code>：指定最大连接数，默认512。不仅仅包括用户建立的连接数，而是包括所有可能的连接数，且该值不能大于操作系统支持打开的最大文件句柄数量65535。Linux 可以使用<code>ulimit -n</code>查看句柄数。</li><li>作用域：<code>events</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>worker_connections number;</span></div><h4 class="relative group">default_type<div id=default_type class=anchor></div></h4><ul><li>在常用的浏览器中，可以显示的内容有<code>HTMl、XML、GIF及Flash</code>等种类繁多的文本，媒体等资源，浏览器为区分这些资源，需要使用<code>MIME Type</code>。</li><li><code>MIME Type</code>是网络资源的媒体资源。<code>Nginx</code>作为<code>Web</code>服务器，必须能够识别前端请求的资源类型。</li><li>在默认的<code>Nginx</code>配置文件中，在http块中有<code>include mime.types;</code>配置，从<code>mim.type</code>文件内容片段可以看到，定义了一个<code>types</code>结构，结构中包含了浏览器能够识别的<code>MINE</code>类型以及对应于相关类型的文件后缀名。由于<code>mime.types</code>文件是主配置文件应用的第三方文件，因此，<code>types</code>也是<code>Nginx</code>配置文件中的一个配置块，称之为<code>types</code>块，其用于定义<code>MIME</code>类型。</li><li><code>default_types</code>指令用于处理前端请求的<code>MIME</code>类型。</li><li>语法结构：<ul><li><code>mime-type</code>：是types块中定义的MIME-Type。默认值为<code>text/plain</code>。</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>default_type mime-type;</span></div><h4 class="relative group">access_log<div id=access_log class=anchor></div></h4><ul><li>用于记录<code>Nginx</code>服务器提供服务过程中应答前端请求的日志，称之为服务日志。</li><li><code>Nginx</code>服务器支持对服务日志的格式、大小、输出等进行配置。</li><li>语法格式：<ul><li><code>path</code>：配置服务日志的文件存放路径和名称。</li><li><code>format</code>：可选项，自定义服务日志的格式字符串，也可以通过“格式字符串”名称使用<code>log_format</code>指令定义好的格式。</li><li><code>buffer</code>=size：配置临时存放服务日志的内存缓存区大小。</li><li><code>off</code>：取消记录服务日志</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>access_log path [format[buffer=size]] | off;</span></div><h4 class="relative group">log_format<div id=log_format class=anchor></div></h4><ul><li>用于定义服务日志的格式，并且可以为格式字符串定义一个名称，以便<code>access_log</code>指令可以直接调用。</li><li>语法格式：<ul><li>name：格式字符串的名称，默认名称<code>combined</code></li><li><code>string</code>：服务日志的格式字符串。在定义的过程中，可以使用<code>Nginx</code>配置预设的一些变量获取相关内容，变量名称使用双引号括起来，<code>string</code>整体使用单引号括起来。在<code>string</code>中可以使用的变量参见
<a class="!rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700" href=/docs/nginx/var/ target=_self role=button>Nginx 内置变量</a></li><li>作用域：<code>http</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>log_format name string &mldr;;</span></div><p>  来看一个示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>log_format exampleLog <span class=s1>&#39;$remote_addr - [$time_local] $request &#39;</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;$status $body_bytes_sent $http_referer &#39;</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;$http_user_agent&#39;</span><span class=p>;</span>
</span></span></code></pre></div><blockquote><p>这条配置定义了服务日志文件的名称为 exampleLog。来看测试结果</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>192.168.1.1 - <span class=o>[</span>15/Oct/2024:19:20:41 +0800<span class=o>]</span> <span class=s2>&#34;GET / HTTP/1.1&#34;</span> <span class=m>200</span> <span class=m>151</span> <span class=s2>&#34;-&#34;</span> <span class=s2>&#34;Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)&#34;</span>
</span></span><span class=line><span class=cl>192.168.1.1 - <span class=o>[</span>15/Oct/2024:19:20:41 +0800<span class=o>]</span> <span class=s2>&#34;GET /favicon.ico HTTP/1.1&#34;</span> <span class=m>404</span> <span class=m>570</span> <span class=s2>&#34;-&#34;</span> <span class=s2>&#34;Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)&#34;</span>
</span></span></code></pre></div><p>  简单分析一下第二条日志，<code>$remote_addr</code>获取到用户机的IP地址为<code>192.168.1.1</code>，<code>$time_local</code>获取到本地时间为<code>15/Oct/2024:19:20:41 +0800</code>，<code>$request</code>获取到请求为<code>GET /favicon.ico HTTP/1.1</code>，<code>$status</code>获取到请求状态为<code>404</code>，<code>$body_bytes_sent</code> 获取到请求体的大小为<code>570B</code>，<code>$http_referer</code>未获取到任何内容，<code>$http_user_agent</code>获取到用户使用<code>Mozilla</code>浏览器。<br>   通过分析可以看到，在正常情况下，对于绝大多数的内置变量，<code>Nginx</code>服务器都能够获取到相关内容，但也会出现空值的情况。</p><h4 class="relative group">sendfile<div id=sendfile class=anchor></div></h4><ul><li>在<code>Apache</code>、<code>lighttpd</code> 等<code>Web</code>服务器配置中，都有和<code>sendfile</code>相关的配置。</li><li><code>sendfile</code> 是一种高效的文件传输机制，它允许服务器直接在内核空间和文件系统之间传输文件，而无需将文件内容复制到用户空间。这样可以显著提高文件传输的效率和性能，特别是对于大文件或高负载的情况。</li><li><code>sendfile</code> 指令只适用于传输静态文件，对于动态内容（如 <code>PHP</code> 脚本输出）不适用。</li><li>语法格式：<ul><li><code>on</code>：开启</li><li><code>off</code>：关闭</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>sendfile on | off;</span></div><h4 class="relative group">sendfile_max_chunk<div id=sendfile_max_chunk class=anchor></div></h4><ul><li>用于设置每个 <code>sendfile</code> 传输的最大字节数。</li><li>当需要传输的文件大小超过<code>size</code>此值时，<code>Nginx</code> 会分割文件并使用多个 <code>sendfile</code> 操作进行传输。</li><li>其中，<code>size</code>值如果大于0，<code>Nginx</code>进程的每个<code>worker process</code>每次调用<code>sendfile()</code>传输的数据量最大不能超过这个值；如果设置为0，则无限制。</li><li>语法结构：<ul><li><code>size</code>：传输的字节数大小，默认为0</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>sendfile_max_chunk size;</span></div><h4 class="relative group">keepalive_timeout<div id=keepalive_timeout class=anchor></div></h4><ul><li>与用户建立会话连接后，<code>Nginx</code>服务器可以保持这些连接打开一段时间。</li><li>语法结构：<ul><li><code>timeout</code>：服务器端对连接的保持时间，以秒为单位。默认值为75s</li><li><code>header_timeout</code>：可选项，用于设置在发送响应头后等待客户端发送请求头的超时时间。如果在该时间内没有收到新的请求头，服务器将关闭连接。在应答报文头部的<code>Keep-Alive</code>域设置超时时间：<code>Keep-Alive: timout=header_timeout</code>。报文中的这个指令可以被<code>Mozilla</code>或者<code>Konqueror</code>识别。</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>keepalive_timeout timeout [header_timout];</span></div><h4 class="relative group">keepalive_requests<div id=keepalive_requests class=anchor></div></h4><ul><li><code>Nginx</code>服务端和用户端建立会话连接后，用户端通过此连接发送请求。</li><li><code>keepalive_requests</code>指令用于限制用户通过某一连接向<code>Nginx</code>服务器发送请求的次数。</li><li>语法格式：<ul><li><code>number</code>：设置用户端发送请求的次数。默认为100</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>keepalive_requests number;</span></div><h4 class="relative group">listen<div id=listen class=anchor></div></h4><ul><li><p>用于网络监听，配置方法主要有三种：</p><ul><li>监听IP地址</li><li>监听端口</li><li>监听域名</li></ul></li><li><p>监听IP的语法结构：<div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2.0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2H272zM192 512c44.2.0 80-35.8 80-80V416H112v16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8.0 16 7.2 16 16s-7.2 16-16 16c-44.2.0-80 35.8-80 80z"/></svg></span></span><span class=dark:text-neutral-300>listen address[:port] [default_server] [setfib=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [deferred]
[accept_filter=filter] [bind] [ssl];</span></div></p></li><li><p>监听端口的语法结构：<div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>listen address port [default_server] [setfib=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [ssl];</span></div></p></li><li><p>监听UNIX Domain Socket(一种在原有Socket框架上发展起来的IPC机制，用于在单个主机上执行客户/服务器通信。)的语法结构：<div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>listen unix:path [default_server] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred]
[bind] [ssl];</span></div></p><ul><li>address：IP地址，如果是<code>IPv6</code>的地址，需要使用中括号"[]&ldquo;括起来。</li><li>port：端口号，如果只定义了IP地址没有定义端口号，就使用80端口。</li><li>path：socket文件路径，如<code>/var/run/nginx.sock</code>等</li><li>default_server：标识符，将此虚拟主机设置为<code>address:port</code>的默认主机。</li><li>setfib=number：<code>Nginx</code>-0.8.44中使用这个变量监听<code>socket</code>关联路由表，目前只对<code>FreeBSD</code>起作用，不常用。</li><li>backlog=number：设置监听函数<code>listen()</code>最多允许多少网络连接同时处理挂起状态，在<code>FreeBSD</code>中默认为-1，其他平台默认511。</li><li>rcvbuf=size：设置监听<code>socket</code>接收缓存区大小。</li><li>sndbuf=size：设置监听<code>socket</code>发送缓存区大小。</li><li>deferred：标识符，将<code>accept()</code>设置为<code>Deferred</code>模式。</li><li>accept_filter=filter：设置监听端口对请求的过滤，被过滤的内容不能被接收和处理。该指令只在<code>FreeBSD</code>和<code>NetBSD 5.0+</code>平台下有效。filter可以设置为<code>dataready</code>或<code>httpready</code></li><li>bind：标识符，使用独立的bind()处理此<code>address:port</code>；一般情况下，对于端口相同而IP地址不同的多个连接，<code>Nginx</code>服务器将只使用一个监听命令，并使用bind()处理端口相同的所有连接。</li><li>ssl：标识符，设置会话连接使用<code>SSL</code>模式进行，此标识符和<code>Nginx</code>服务器提供的<code>HTTPS</code>服务有关。</li><li>作用域：<code>server</code></li></ul></li></ul><p>   下面给出一些示例开说明<code>listen</code>的用法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>listen *:80 <span class=p>|</span> *:8080；
</span></span><span class=line><span class=cl><span class=c1># 监听所有80端口和8080端口。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>listen 192.168.1.1：8000；    <span class=c1># 监听具体的IP和具体的端口上的连接</span>
</span></span><span class=line><span class=cl>listen 192.168.1.1<span class=p>;</span>           <span class=c1># 监听具体的IP的所有端口上的连接</span>
</span></span><span class=line><span class=cl>listen 8000<span class=p>;</span>                  <span class=c1># 监听具体端口上的所有IP连接，等同于 listen *:8000;</span>
</span></span><span class=line><span class=cl>listen 192.168.1.1 default_server <span class=nv>backlog</span><span class=o>=</span>1024<span class=p>;</span>   <span class=c1># 设置192.168.1.1的连接请求默认此虚拟主机处理，并且允许最多1024网络连接同时处于挂起状态。</span>
</span></span></code></pre></div><h4 class="relative group">server_name<div id=server_name class=anchor></div></h4><ul><li>是指<code>server</code>块对外提供的虚拟主机。设置了主机的名称并配置好<code>DNS</code>，用户就可以使用这个名称向此虚拟主机发送请求了。</li><li>语法结构：<ul><li>name：域名。对于<code>name</code>来说，可以只有一个域名，也可以由多个域名并列，之间用空格隔开。也可以使用IP地址，但是这种方式不推荐。</li></ul></li></ul><p><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>server_name name &mldr;;</span></div>   下面给出一些示例来说明<code>server_name</code>的用法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server_name myserver.com www.myserver.com<span class=p>;</span>
</span></span></code></pre></div><p>   在该例中，<code>Nginx</code>服务器规定，第一个名称作为此虚拟主机的主要名称。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server_name *.myserver.com www.myserver.*<span class=p>;</span>
</span></span></code></pre></div><p>   在该例中，<code>name</code>可以使用通配符<code>*</code>，但通配符只能用在由三段字符串组成的名称的首段和尾段，或者由两段字符串组成的名称的尾段。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server_name ~^www<span class=se>\d</span>+<span class=se>\.</span>myserver<span class=se>\.</span>com$<span class=p>;</span>
</span></span></code></pre></div><p>   <code>name</code>还可以使用正则表达式，并使用波浪号<code>~</code>作为正则表达式字符串的开始标记。在该例中，正则表达式的含义：以<code>www</code>开头(使用<code>^</code>标记)，紧跟一个或多个<code>0~9</code>的数字(<code>\d+</code>的含义，其中，<code>\d</code>代表<code>0~9</code>的某一个数字，<code>+</code>代表之前的一个字符出现一次或者多次)，再紧跟<code>.myserver.co</code>(由于<code>.</code>在正则表达式中有特殊含义，因此需要使用<code>\</code>进行转义)，最后以<code>m</code>结束(由<code>$</code>标记)。关于正则表达式的相关内容参见
<a class="!rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700" href=/docs/nginx/regex/ target=_self role=button>正则表达式</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server_name ~^www<span class=se>\.</span><span class=o>(</span>.+<span class=o>)</span><span class=se>\.</span>com$<span class=p>;</span>
</span></span></code></pre></div><p>   <code>Nginx</code>从<code>0.7.40</code>版本开始，<code>name</code>中的正则表达式支持字符串捕获功能。当请求通过<code>www.myserver.com</code>到达<code>Nginx</code>服务器端时，将会被上面的正则表达式配置成功，其中的<code>myserver</code>将会被捕获，并记录到<code>$1</code>中。在本<code>server</code>块的下文配置中，当需要<code>myserver</code>时，就可以使用<code>$1</code>代替<code>myserver</code>了。<br>   由于<code>server_name</code>指令支持使用通配符和正则表达式两种配置名称的方式，因此在包含有多个虚拟主机的配置文件中，可能会出现一个名称被多个虚拟主机的<code>server_name</code>匹配成功。那么，来自这个名称的请求到底要交给哪个虚拟主机处理呢？<code>Nginx</code>服务器做出如下规定：<br>a. 对于匹配方式不同的，按照以下的优先级选择虚拟主机，排在前面的优先处理请求。<br>   ① 准确匹配<code>server_name</code><br>   ② 通配符在开始时匹配<code>server_name</code>成功<br>   ③ 通配符在结尾时匹配<code>server_name</code>成功<br>   ④ 正则表达式匹配<code>server_name</code>成功<br>b. 在以上四种匹配方式中，如果<code>server_name</code>被处于同一优先级的匹配方式多次匹配成功，则首次匹配成功的虚拟主机处理请求。</p><h3 class="relative group">配置location块<div id=%E9%85%8D%E7%BD%AElocation%E5%9D%97 class=anchor></div></h3><ul><li>语法结构:</li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>location [ = | ~ | ~* | ^~ ] uri {&mldr;&mldr;}</span></div><ul><li><code>uri</code>：变量是待匹配的请求字符串，可以是不含正则表达的字符串，如<code>/myserver.php</code>等，称之为<code>标准uri</code>；可以是包含有正则表达的的字符串，如<code>\.php$</code>(表示以<code>.php</code>结尾的<code>URL</code>)等，称之为<code>正则uri</code>。</li><li>方括号部分是可选项，用来改变字符串与<code>uri</code>的匹配方式。</li></ul><p>  在不添加方括号选项时，<code>Nginx</code>服务器首先在<code>server</code>块的多个<code>location</code>块中搜索是否有标准<code>uri</code>和请求字符串匹配，如果有多个可以匹配，旧纪录匹配度最高的一个。然后服务器再用<code>location</code>块中的正则<code>uri</code>和请求字符串匹配，当第一个正则<code>uri</code>匹配成功，结束搜索，并使用这个<code>location</code>块处理次请求；如果正则匹配全部失败，就是用刚才记录的匹配度最高的<code>location</code>块处理此请求。<br></p><ul><li><code>=</code>：用于标准<code>uri</code>前，要求请求字符串与<code>uri</code>严格匹配。如果已经匹配成功，就停止继续搜索并立即处理此请求。</li><li><code>~</code>：用于表示<code>uri</code>包含正则表达式，并且区分大小写。</li><li><code>~*</code>：用于表示<code>uri</code>包含正则表达式，并且不区分大小写。</li><li><code>^~</code>：用于标准<code>uri</code>前，要求<code>Nginx</code>服务器找到标识<code>uri</code>和请求字符串匹配度最高的<code>location</code>后，立即使用此<code>location</code>处理请求，而不再使用<code>location</code>块中的正则<code>uri</code>和请求字符串做匹配。</li></ul><p><strong>注意：</strong><br>   在浏览器传送<code>URI</code>时对一部分字符进行<code>URI</code>编码，比如空格被编码为<code>%20</code>，问号被编码为<code>%3f</code>等。<code>^~</code>有一个特点是，它对<code>uri</code>中的这些符号将会进行编码处理。比如，如果<code>location</code>块收到的<code>URI</code>为 <code>html%20/data</code>，则当<code>Nginx</code>服务器搜索到配置为 <code>^~ /html /data</code> 的<code>location</code>时，可以匹配成功。</p><h4 class="relative group">root<div id=root class=anchor></div></h4><ul><li><code>Web</code>服务器接收到网络请求之后，首先要在服务器端指定目录中寻找请求资源。在<code>Nginx</code>服务器中，指令<code>root</code>就是用来配置这个根目录的。</li><li>语法结构：<ul><li><code>path</code>：<code>path</code>为Nginx服务器接收到请求以后查找资源的根目录路径。<code>path</code>变量中可以包含Nginx服务器预设的大多数变量，只有 <code>$document_root</code> 和 <code>$realpath_root</code> 不可以使用。</li><li>作用域：http、server、location</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>root path;</span></div><p>   <code>root</code>指令的一个示例为：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>location /data/
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  root /locationtest1<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><blockquote><p>当<code>location</code>块接收到了<code>/data/index.htm</code>的请求时，将在<code>/locationtest1/data/</code>目录下找到<code>index.htm</code>响应请求。</p></blockquote><h4 class="relative group">alias<div id=alias class=anchor></div></h4><ul><li>在location块中，除了使用root指令指明请求处理根目录，还可以使用alias指令改变location接收到的URI的请求路径。</li><li>语法结构：<ul><li><code>path</code>：<code>path</code>即为修改后的根路径。同样，此变量中也可以包含除了<code>$document_root</code> 和 <code>$realpath_root</code>之外的其他Nginx服务器预设变量。</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>alias path;</span></div><p>示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>location ~ ^/data/<span class=o>(</span>.+<span class=se>\.</span>htm<span class=p>|</span>htm<span class=o>)</span>$
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>alias</span> /locationtest1/other/<span class=nv>$1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><blockquote><p>当此<code>location</code>块接收到 <code>/data/index.htm</code> 请求时，匹配成功，之后根据<code>alias</code>指令的配置，<code>Nginx</code>服务器将到<code>/locationtest1/other</code>目录下找<code>index.htm</code>并响应请求。可以看到，通过<code>alias</code>指令的配置。根路径已经从<code>/data</code> 更改为<code>/locationtest1/other</code> 了。</p></blockquote><h4 class="relative group">index<div id=index class=anchor></div></h4><ul><li>用于设置网站的默认首页，它一般可以有两个作用：<ul><li>1：用户在发出请求访问网络时，请求地址可以不写首页名称</li><li>2：可以对一个请求，根据其请求内容而设置不同的首页。</li></ul></li><li>语法结构：<ul><li><code>file</code>：<code>file</code>变量可以包括多个文件名，期间使用空格分隔，也可以包含其他变量。此变量默认为<code>index.html</code>。</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>index file &mldr;;</span></div><p>示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>location ~ ^/data/<span class=o>(</span>.+<span class=o>)</span>/web/ $
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  index index.<span class=nv>$1</span>.html index.my1.html index.html<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><blockquote><p>当<code>location</code>块接收到 <code>/data/locationtest/web/</code>时，匹配成功，它首先将预置变量<code>$1</code> 置为<code>locationtest</code>，然后在<code>/data/locationtest/web/</code>路径下按照<code>index</code>的配置次序依次寻找<code>index.locationtest.html</code>页、<code>index.my1.html</code>页 和 <code>index.html</code>页，首先找到哪个页面，就是用哪个页面响应请求。</p></blockquote><h4 class="relative group">error_pgae<div id=error_pgae class=anchor></div></h4><ul><li>Nginx服务器设置网络错误页面的指令为<code>error_page</code>。</li><li>语法结构：<ul><li><code>code</code>：要处理的<code>HTTP</code>错误代码，参见
<a class="!rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700" href=/posts/httpstatus/ target=_self role=button>HTTP 常见错误代码</a></li><li>reponse：可选项，将<code>code</code>指定的错误代码转化为新的错误代码<code>response</code>。</li><li>uri：错误页面的路径或者网站地址。如果设置为路径，则是以Nginx服务器按照路径下的<code>html</code>目录作为根路径的相对路径；如果设置为网址，则<code>Nginx</code>服务器会直接访问该网址获取错误页面，并返回给用户端。</li><li>作用域：http、server、location</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>error_page code [=[response]] uri;</span></div><p>示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>error_page <span class=m>404</span> /404.html<span class=p>;</span>
</span></span></code></pre></div><blockquote><p>设置<code>Nginx</code>服务器使用Nginx安装路径<code>/html/404.html</code> 页面响应404错误。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>error_page <span class=m>403</span> http://somewebsite.com/forbiden.html<span class=p>;</span>
</span></span></code></pre></div><blockquote><p>设置<code>Nginx</code>服务器使用<code>http://somewebsite.com/forbiden.html</code>页面响应403错误。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>error_page <span class=nv>410</span> <span class=o>=</span><span class=m>301</span> /empty.gif<span class=p>;</span>
</span></span></code></pre></div><blockquote><p>设置<code>Nginx</code>服务器产生410的<code>HTTP</code>消息时，使用Nginx安装路径<code>/html/empty.gif</code> 返回给用户端301消息。</p></blockquote><p>  从<code>error_page</code>指令分析中可以看到，，变量<code>uri</code>实际上是一个相对于<code>Nginx</code>服务器安装路径的相对路径。那么，如果不想将错误页面放到<code>Nginx</code>服务器的安装路径下管理，该怎么做？很简单，只需要将另外使用一个<code>location</code>指令定向错误页面到新的路径下面就可以了。<br>   对于上面第一个示例，我们希望<code>Nginx</code>服务器使用<code>/myserver/errorpages/404.html</code>页面响应404错误。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>error_page <span class=m>404</span> /404.html<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>location /404.html
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  root /myserver/errorpages/<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><blockquote><p>首先捕获<code>404.html</code>请求，然后将请求定向到新的路径下面即可。</p></blockquote><h4 class="relative group">allow<div id=allow class=anchor></div></h4><ul><li><code>Nginx</code>配置通过两种途径支持基本访问权限的控制，其中一种是由<code>HTTP</code>标准模块<code>ngx_http_access_module</code>支持的，其通过IP来判断客户端是否拥有对<code>Nginx</code>的访问权限。</li><li>用于设置允许访问<code>Nginx</code>的客户端IP。</li><li>语法结构：<ul><li><code>address</code>：允许访问的客户端IP，不支持同时设置多个。如果有多个IP需要设置，需要重复使用<code>allow</code>指令。</li><li><code>CIDR</code>：允许访问的客户端的CIDR地址，例如 <code>202.80.18.23/25</code>，前面是32位IP地址，后面<code>/25</code>代表该IP地址中前25位是网络部分，其余位代表主机部分。</li><li><code>all</code>：代表允许所有客户端访问。<code>Nginx 0.8.22</code>版本后也支持ipv6地址。</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>allow address | CIDR | all;</span></div><p>示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>allow 2620:108:e000::8001<span class=p>;</span>
</span></span></code></pre></div><h4 class="relative group">deny<div id=deny class=anchor></div></h4><ul><li>作用刚好和<code>allow</code>相反，它用于设置禁止访问<code>Nginx</code>的客户端IP。</li><li>语法结构：<ul><li><code>address</code>：禁止访问的客户端IP，不支持同时设置多个。如果有多个IP需要设置，需要重复使用<code>deny</code>指令。</li><li><code>CIDR</code>：禁止访问的客户端的CIDR地址。</li><li><code>all</code>：代表禁止所有客户端访问。</li><li>作用域：<code>http</code>、<code>server</code>、<code>location</code></li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>deny address | CIDR | all;</span></div><p>示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>location <span class=o>{</span>
</span></span><span class=line><span class=cl>  deny 192.168.1.1<span class=p>;</span>
</span></span><span class=line><span class=cl>  allow 192.168.1.0/24<span class=p>;</span>
</span></span><span class=line><span class=cl>  deny all<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><blockquote><p>这个示例中，首先配置禁止<code>192.168.1.1</code>访问<code>Nginx</code>，然后配置允许<code>192.168.1.0/24</code>访问<code>Nginx</code>，最后又使用<code>all</code>配置禁止所有IP的访问，那么，<code>192.168.1.0/24</code>客户端到底可不可以访问呢？是可以的。</p><p><code>Nginx</code>配置在解析的过程中，遇到<code>deny</code>指令或者<code>allow</code>指令是按照顺序对当前客户端的连接进行访问权限检查的。如果遇到匹配的配置时，则停止继续向下搜索相关配置。因此，当<code>192.168.1.0/24</code>客户端访问时，<code>Nginx</code>在第3行解析配置发现允许该客户端访问，就不会继续向下解析第4行了。</p></blockquote><h4 class="relative group">auth_basic<div id=auth_basic class=anchor></div></h4><ul><li><code>Nginx</code>还支持基于<code>HTTP Basic Authentication</code>协议的认证。该协议时一种HTTP性质的认证办法，需要识别用户名和密码，认证失败的客户端不拥有访问<code>Nginx</code>服务器的权限。该功能由HTTP标准模块<code>ngx_http_auth_basic_module</code>支持。</li><li>语法结构：<ul><li><code>string</code>：开启该认证功能，并配置验证时的指示信息。</li><li><code>off</code>：关闭该认证功能。</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>auth_basic string | off;</span></div><h4 class="relative group">auth_basic_user_file<div id=auth_basic_user_file class=anchor></div></h4><ul><li>用于设置包含用户名和密码信息的文件路径。</li><li>语法结构：<ul><li><code>file</code>：密码文件的绝对路径。支持明文或者密码加密后的文件。</li></ul></li></ul><div class="flex px-4 py-3 rounded-md" style=background-color:#7ee0f0><span class="ltr:pr-3 rtl:pl-3 flex items-center" style=color:#7ee0f0><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 0C114.6.0.0 114.6.0 256s114.6 256 256 256 256-114.6 256-256S397.4.0 256 0zm0 128c17.67.0 32 14.33 32 32 0 17.67-14.33 32-32 32s-32-14.3-32-32 14.3-32 32-32zm40 256h-80c-13.2.0-24-10.7-24-24s10.75-24 24-24h16v-64h-8c-13.25.0-24-10.75-24-24s10.8-24 24-24h32c13.25.0 24 10.75 24 24v88h16c13.25.0 24 10.75 24 24s-10.7 24-24 24z"/></svg></span></span><span class=dark:text-neutral-300>auth_basic_user_file file;</span></div><blockquote><p>加密密码可以使用crypt()函数进行密码加密的格式，可以使用<code>htpasswd</code>命令生成。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>htpasswd  -c  -d /nginx/conf/pass_file username   <span class=c1># 运行后输入密码即可</span>
</span></span></code></pre></div></div></div><script>var oid="views_docs/nginx/instruct/index.md",oid_likes="likes_docs/nginx/instruct/index.md"</script><script type=text/javascript src=/js/page.min.b06a29d42a4ed16787978e2eee1e8c797b7698db2bc14ccee78f5c80ac566fc996190a73ad80a5e987558474b20b96fa38f7d85b405f165ff72b7b163c5ad11b.js integrity="sha512-sGop1CpO0WeHl44u7h6MeXt2mNsrwUzO549cgKxWb8mWGQpzrYCl6YdVhHSyC5b6OPfYW0BfFl/3K3sWPFrRGw=="></script></section><footer class="pt-8 max-w-prose print:hidden" style=width:90%><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/docs/nginx/config/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Nginx Config</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span></a></span><span><a class="flex text-right group ml-3" href=/docs/nginx/arch/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Nginx architecture</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"></span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><div class=comment id=giscus><script src=https://giscus.app/client.js data-repo=liang102/liang102.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkzODM0NDU5MzE=" data-category=Announcements data-category-id=DIC_kwDOFtrrq84CbZYf data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=返回顶部 title=返回顶部>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/authors/ title=作者>©小橘子Single</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400"><a href=https://beian.miit.gov.cn/ target=_blank>桂ICP备2021001631号-2</a><br></p><p class="text-xs text-neutral-500 dark:text-neutral-400">由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a> 强力驱动</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js integrity="sha512-YgYLskf03itt3kWQNmj++2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://ergua.site style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=搜索 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="关闭 (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L237.3 256 342.6 150.6z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>